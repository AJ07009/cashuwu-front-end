import{__rest as o,__awaiter as i}from"../../../node_modules/tslib/tslib.es6.js";import{jsx as e}from"react/jsx-runtime";import{Amplify as t,Auth as r}from"aws-amplify";import l from"maplibre-gl";import{AmplifyMapLibreRequest as m}from"maplibre-gl-js-amplify";import{forwardRef as n,useMemo as a,useState as s,useEffect as p}from"react";import u from"react-map-gl";const v=n(((n,v)=>{var d,{mapLib:c,mapStyle:f,style:g}=n,b=o(n,["mapLib","mapStyle","style"]);const y=t.configure(),j=a((()=>{var o,i,e,t;return null!==(t=null!==(i=null===(o=y.geo)||void 0===o?void 0:o.amazon_location_service)&&void 0!==i?i:null===(e=y.geo)||void 0===e?void 0:e.AmazonLocationService)&&void 0!==t?t:{}}),[y]),[h,w]=s(),L=a((()=>Object.assign({height:"100vh",position:"relative",width:"100vw"},g)),[g]);return p((()=>{i(void 0,void 0,void 0,(function*(){const o=yield r.currentUserCredentials();if(o){const{region:i}=j,{transformRequest:e}=new m(o,i);w((()=>e))}}))}),[j]),h?e(u,Object.assign({},b,{mapLib:null!=c?c:l,mapStyle:null!=f?f:null===(d=j.maps)||void 0===d?void 0:d.default,ref:v,style:L,transformRequest:h})):null}));export{v as MapView};
